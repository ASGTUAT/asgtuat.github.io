<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>第 7 回情報工学実験</title>
    <link rel="stylesheet" type="text/css" href="./asg.css">
  </head>
  <body>
    
    <table align="center" width="1000px">

      <tr><td>
	  
	  <h1>第 7 回情報工学実験 1</h1>
	  
	  <div>
	    <p>本課題では，シェルスクリプトを理解を通じて，煩雑な処理を手軽に行うための技術を身につけることを目的とする．シェルスクリプトとは，シェル(コマンドを入力してオペレーティングシステムに指示を出すためのインターフェース．Linux でいうターミナル，Windows でいうコマンドプロンプト)で実行するコマンドを用いて記述されたプログラムを指す．シェルには，便利なコマンドが複数用意されており，これらを組み合わせ使うと，人手では煩雑で大変な仕事を簡単に行うことができる．たとえば，1,000 個のファイルから``Linux''という文字列を含む，ファイルサイズが 1 KB 以上のファイル名を列挙したり，CSV 形式の 10,000 個のファイルの第 2 要素が 100 以上の要素で構成される CSV を作成することが容易にできる．本課題を通して，コンピュータ上での作業を効率的に行う方法(楽する方法)を身につけ，生産性向上の一助となることを期待している．</p>
	  </div>
	  <br>
	  <ul>
	      <li class="index"><a class="index" href="index.html">説明(シェルスクリプトの基本)</li>
	      <li class="index"><a class="index" href="advanced.html">説明(応用)</a></li>
	      <li class="index"><a class="index" href="slide.html">説明スライド</an></li>
	      <li class="index">課題</li>
	      <li class="index"><a class="index" href="submit.html">レポートの提出</a></li>
	    </ul>
	      <br><hr color="blue">

	      課題1から4までに取り組み，答えをレポートにまとめよ．発展課題は必須ではないが，ぜひともチャレンジして欲しい．

	      <h2>課題1</h2>
	      <p> 数値を与えると，数値を出力するプログラム<a href="./unknown">unknown</a> が存在する(ダウンロード後，実行権限をつければ動作する)．このとき，以下の問に答えよ．なお，シェルは何を用いてもよい．</p>
	      <p><b>1-1:</b> 1 から 10 までの入力を与えるとどのような出力結果が得られるか答えよ．
              <p><b>1-2:</b> 1 から 500 までの入力を与えて，その出力結果を unknown.log に出力するシェルスクリプトを作成せよ．出力したファイル内容はレポートには記載せず，添付せよ．</p>
	      <p><b>1-3:</b> 1 から 500 までの入力を与えて，その間の最大値と最小値，およびそのときに入力した数値を出力するシェルスクリプトを作成せよ．</p></p>
	      <p><b>1-4(発展課題): </b>上記課題をスクリプト言語(python や ruby など)でも作成し，両者の記述性について述べよ．</p>

	      <h2>課題2</h2>
	      <p> 次のコマンドをリダイレクトおよびパイプを用いて実現し，出力結果を示せ．</p>
	      <p><b>2-1: </b> 現在いるディレクトリの中から，ファイルサイズの大きい上位 3 つのファイルを出力する．</p>
	      <p><b>2-2: </b> <a href="https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.14.tar.xz">Linux のソースコード</a>の中から，``Linus''という文字列を含むテキストファイル(.txt で終わるファイル)と，C ファイル(.c もしくは .h で終わるファイル)とに分けて，その結果を linus.log というファイルにそれぞれ書き出す．なお，出力結果がわかりやすくなるよう，それぞれの結果の前に ``===== TEXT FILES ====='' と ``===== C FILES =====''という文字列を挿入するようにせよ．ソースコードファイルは圧縮されており，``tar Jxf linux-4.14.tar.xz''で解凍できる．</p>
	      <p><b>2-3(発展課題): </b> Linux のソースコードの中から，ファイルサイズの大きい上位 3 つのファイルを出力する．</p>

	      <h2>課題3</h2>
	      <p> 気象庁(http://www.jma.go.jp/jma/index.html)が観測した，<a href="./data/weatherF.dat">F 市のデータ<a>がある．2017 年 1 月から 10 月までの気象データが格納されており，左より 1.日付，2.平均気温，3.最高気温，4.最低気温，5.降水量，6.日照時間，7.平均風速，8.最高風速，9.最高瞬間風速，の値が示されている．このとき以下の問に答えよ．</p>
	      <p><b>3-1: </b> 日付以外の各項目における最大値，最小値を観測した日付を出力するスクリプトを作成せよ．</p>
	      <p><b>3-2: </b> 月別の平均気温，降水量，日照時間，を出力するスクリプトを作成せよ．</p>
	      <p><b>3-3: </b> 今，新たに<a href="./data/weatherW.dat">W 市のデータ</a>と<a href="./data/weatherK.dat">K 市のデータ</a>が追加された．これら 3 都市において，平均気温，最高気温，最低気温の 1.最大値と最小値，2.それぞれの日，3.都市名，を出力するスクリプトを作成せよ．</p>
	      

	      <h2>課題4</h2>
	      <p> Facebook や Google といった大規模なウェブサービスを考える．こうしたサービスは多数の高性能マシン(サーバマシンと呼ぶ)の上で成り立っている．今，これらのマシンの状態を表したログがラック(サーバ計算機を格納する箱)ごとにある．ラックは全部で 100 台ある．ログには，1.サーバの ID(ID)，2.現在稼働しているか否か(STATUS)，3.連続稼動時間(HOURS)，4.直近でサーバマシンが停止した理由(SYMPTOM)，が記載されている．このとき，以下の問に答えよ．ログはこの<a href="./racklogs.tar.gz">ファイル</a>に圧縮されている．``tar zxf racklogs.tar.gz''で解凍できる．</p>

	      <p><b>4-1:</b> 全てのラックにおいて，現在稼働しているサーバマシンの割合を計算するスクリプトを作成せよ．STATUS は OK であれば稼働中，DOWN であれば停止中である．また，各ラックのサーバの平均稼働時間の長い上位 3 位のラック名を出力するスクリプトを作成せよ．</p>

              <p><b>4-2:</b> サーバマシンが停止した理由をその割合とともランク付けするスクリプトを作成せよ．SYMPTOM は MAINTENACE(メンテナンス), DISK FAILURE(ディスク故障)，POWER FAILURE(電源障害)，CPU ERROR(CPU のエラー)，MEMORY ERROR(メモリエラー)，UNKNOWN ERROR(原因不明)に別れる．</p>

              <p><b>4-3:</b> rack1 から rack10 までのデータをエクセルでみるために，これらのログを 1 つの CSV(Comma Separated Values) 形式のファイルにまとめることを考える．CSV 形式は各項目をカンマで区切った形式のファイルである．サーバの ID とラック名をハイフンでつなげ(たとえば rack1 の server1 であれば server1-rack1)，rack1 から rack10 のデータを 1 つの CSV 形式に集約するスクリプトを作成せよ．</p>

	      <p><b>4-4(発展課題):</b> スライドや本ページ説明したような，あるプログラムを動かしてその挙動を監視するようなスクリプトを記述してそのリソース使用率をグラフ化せよ．監視するプログラムやリソース(CPU やメモリ，ディスク使用量など)はなんでもよい．</p>
    </table>
  </body>
</html>
